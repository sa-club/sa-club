@startuml

  [*] --> Загружен
  
  Загружен --> Валидирован : Валидация прошла
  
  Валидирован --> Обрабатывается : Запущена обработка

  state "Обработан успешно" as Обработан_успешно 
  state "Обработан с ошибкой" as Обработан_с_ошибкой

  Обрабатывается --> Обработан_успешно : Удачная \nобработка
  
  Обрабатывается --> Обработан_с_ошибкой : Неудачная \nобработка
  Обработан_успешно --> [*]
  
  state join_state <<join>>
  
  Загружен -->  join_state : Валидация \nне прошла
  Обработан_с_ошибкой --> join_state

  join_state --> Удалён

  Удалён --> [*]

@enduml